<!DOCTYPE html>
<html>
  <script>
    const transpose = (a) => {
      if (!a[0][0]) {
        for (let i = 0; i < a.length; i++) {
          console.log(`||${a[i]}||`);
        }
      } else {
        const rows = a.length,
          cols = a[0].length;

        const grid = [];
        for (let j = 0; j < cols; j++) {
          grid[j] = Array(rows);
        }
        for (let i = 0; i < rows; i++) {
          for (let j = 0; j < cols; j++) {
            grid[j][i] = a[i][j];
          }
        }
        return grid;
      }
    };

    const sum = (a, b) => {
      let newArr = [];
      let aux = [];
      if (a.length == b.length && a[0].length == b[0].length) {
        // ordens iguais
        //soma entre vetores
        if (!a[0][0]) {
          for (let i = 0; i < a.length; i++) {
            newArr.push(a[i] + b[i]);
          }
          return newArr;
        }

        //soma entre matrizes
        for (let i = 0; i < a.length; i++) {
          for (let j = 0; j < a[0].length; j++) {
            aux.push(a[i][j] + b[i][j]);
          }
          newArr.push(aux);
          aux = [];
        }

        return newArr;
      }
      return "Operações entre matrizes requerem ordens iguais";
    };

    const times = (a, b) => {
      let newArr = [];
      let aux = [];

      //multiplicação por escalar
      if (!a[0]) {
        if (!b[0][0]) {
          for (let i = 0; i < b.length; i++) {
            newArr.push(b[i] * a);
          }
        }
        for (let i = 0; i < b.length; i++) {
          for (let j = 0; j < b[0].length; j++) {
            aux.push(b[i][j] * a);
          }
          newArr.push(aux);
          aux = [];
        }
        return newArr;
      }

      // multiplicação elemento a elemento das matrizes
      if (a.length == b.length && a[0].length == b[0].length) {
        //soma entre vetores
        if (!a[0][0]) {
          for (let i = 0; i < a.length; i++) {
            newArr.push(a[i] * b[i]);
          }
          return newArr;
        }

        //soma entre matrizes
        for (let i = 0; i < a.length; i++) {
          for (let j = 0; j < a[0].length; j++) {
            aux.push(a[i][j] * b[i][j]);
          }
          newArr.push(aux);
          aux = [];
        }

        return newArr;
      }
      return "Operações entre matrizes requerem ordens iguais";
    };

    const dot = (a, b) => {
      fil_A = a.length;
      col_A = a[0].length;
      fil_B = b.length;
      col_B = b[0].length;

      if (col_A != fil_B) return "Multiplicação não pode ser efetuada!";

      // moldar a matriz resposta com 0
      let multiplication = new Array(fil_A);
      for (let i = 0; i < multiplication.length; i++) {
        multiplication[i] = new Array(col_B).fill(0);
      }
      //Popular a matriz resposta fazendo a operação;
      for (let i = 0; i < multiplication.length; i++) {
        for (let j = 0; j < multiplication[i].length; j++) {
          for (let z = 0; z < col_A; z++) {
            multiplication[i][j] = multiplication[i][j] + a[i][z] * b[z][j];
          }
        }
      }
      return multiplication;
    };

    //-------------------------------------------------------------------
    // teste de aplicação
    //-------------------------------------------------------------------

    times(
      [
        [1, 2, 3],
        [4, 5, 6],
      ],
      [
        [7, 8],
        [9, 10],
        [11, 12],
      ]
    );

    dot(
      [
        [-1, 3],
        [4, 2],
      ],
      [
        [1, 2],
        [3, 4],
      ]
    );
  </script>
</html>
